<div class="min-h-screen bg-gradient-to-br from-cyan-50 to-blue-100 py-8">
  <div class="container mx-auto p-8 bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl">
    <!-- Dashboard Title with Wave Animation -->
    <div class="relative overflow-hidden mb-12">
      <h1 class="text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 to-blue-600 mb-8 text-center tracking-wide animate-title">
        üíß Water Meter Dashboard
      </h1>
      <div class="absolute -bottom-4 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500 animate-wave"></div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="meters.length === 0" class="flex justify-center items-center h-64">
      <div class="spinner"></div>
    </div>

    <!-- Enhanced Search Box -->
    <div *ngIf="meters.length > 0" class="flex justify-center mb-10">
      <div class="relative w-2/3">
        <input
          type="text"
          id="midFilter"
          placeholder="Search by MID..."
          class="w-full p-4 pl-12 border-2 border-cyan-200 bg-white/80 text-cyan-800 rounded-xl focus:outline-none focus:ring-4 focus:ring-cyan-200 shadow-lg transition-all duration-300 hover:shadow-cyan-200/30"
          (input)="filterTable($event)"
        />
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-xl animate-search-icon">üîç</span>
      </div>
    </div>

    <!-- Enhanced Table -->
    <div *ngIf="meters.length > 0" class="overflow-hidden rounded-xl shadow-2xl">
      <table class="min-w-full bg-white">
        <thead>
          <tr class="bg-gradient-to-r from-cyan-600 to-blue-600">
            <th class="p-5 text-left text-lg font-semibold text-white">Timestamp</th>
            <th class="p-5 text-left text-lg font-semibold text-white">MID</th>
            <th class="p-5 text-left text-lg font-semibold text-white">Status</th>
            <th class="p-5 text-left text-lg font-semibold text-white">Battery (mV)</th>
            <th class="p-5 text-left text-lg font-semibold text-white">Network (%)</th>
            <th class="p-5 text-left text-lg font-semibold text-white">Consumption (L)</th>
            <th class="p-5 text-left text-lg font-semibold text-white">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let meter of paginatedData; let i = index" class="border-b border-cyan-100 hover:bg-cyan-50 transition-all duration-300 animate-slide-in" [style.animationDelay]="i * 0.1 + 's'">
            <td class="p-5 text-cyan-800">{{ meter.timestamp | date:'dd MMM yyyy - HH:mm' }}</td>
            <td class="p-5 text-cyan-800 font-medium">{{ meter.MID }}</td>
            <td class="p-5">
              <span
                class="px-4 py-2 rounded-full text-xs font-semibold shadow-md"
                [ngClass]="{
                  'bg-green-100 text-green-700': meter.status_code === 'OK' || meter.status_code === 'Active',
                  'bg-yellow-100 text-yellow-700': meter.status_code === 'Warning' || meter.status_code === 'Maintenance',
                  'bg-red-100 text-red-700': meter.status_code === 'Error' || meter.status_code === 'Offline',
                  'bg-gray-100 text-gray-700': !['OK', 'Active', 'Warning', 'Maintenance', 'Error', 'Offline'].includes(meter.status_code)
                }"
              >
                {{ meter.status_code }}
              </span>
            </td>
            <td class="p-5 text-cyan-800">{{ meter.battery_vol }}</td>
            <td class="p-5">
              <div class="w-full bg-gray-100 rounded-full h-3">
                <div
                  class="bg-gradient-to-r from-cyan-400 to-blue-500 h-3 rounded-full transition-all duration-500"
                  [style.width]="meter.network + '%'"
                ></div>
              </div>
            </td>
            <td class="p-5 text-cyan-800">{{ meter.WH }} L</td>
            <td class="p-5">
              <button
                (click)="viewDetails(meter.MID)"
                class="group relative px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg overflow-hidden shadow-lg hover:shadow-cyan-200/50 transition-all duration-300"
              >
                <span class="relative z-10">View Details</span>
                <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-cyan-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Pagination -->
      <div class="flex justify-between items-center mt-4 p-6">
        <button
          (click)="prevPage()"
          [disabled]="currentPage === 1"
          class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden btn-ripple"
        >
          ‚¨ÖÔ∏è Previous
        </button>
        <span class="text-lg font-semibold">Page {{ currentPage }} of {{ totalPages }}</span>
        <button
          (click)="nextPage()"
          [disabled]="currentPage * itemsPerPage >= filterMeters.length"
          class="px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden btn-ripple"
        >
          Next ‚û°Ô∏è
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="py-8 px-6 mt-12 bg-gradient-to-r from-cyan-600 to-blue-600">
  <div class="container mx-auto text-center text-white">
    <p class="text-lg">
      Powered by
      <a
        href="https://www.daftechsocialictsolution.com"
        target="_blank"
        class="font-semibold hover:text-cyan-200 transition-colors duration-300 border-b-2 border-transparent hover:border-cyan-200"
      >
        DAFTech Social ICT Solution
      </a>
    </p>
  </div>
</footer>
